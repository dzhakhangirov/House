<!DOCTYPE html><html><head><meta http-equiv="Content-Type"content="text/html; charset=utf-8"/><title>Babylon.js sample code</title><!--Babylon.js--><script src="https://cdnjs.cloudflare.com/ajax/libs/dat-gui/0.6.2/dat.gui.min.js"></script><script src="https://assets.babylonjs.com/generated/Assets.js"></script><script src="https://cdn.babylonjs.com/recast.js"></script><script src="https://cdn.babylonjs.com/earcut.min.js"></script><script src="https://cdn.babylonjs.com/babylon.js"></script><script src="https://cdn.babylonjs.com/materialsLibrary/babylonjs.materials.min.js"></script><script src="https://cdn.babylonjs.com/proceduralTexturesLibrary/babylonjs.proceduralTextures.min.js"></script><script src="https://cdn.babylonjs.com/postProcessesLibrary/babylonjs.postProcess.min.js"></script><script src="https://cdn.babylonjs.com/loaders/babylonjs.loaders.js"></script><script src="https://cdn.babylonjs.com/gui/babylon.gui.min.js"></script><style>html,body{overflow:hidden;width:100%;height:100%;margin:0;padding:0;}#renderCanvas{width:100%;height:100%;touch-action:none;}#canvasZone{width:100%;height:100%;}</style></head><body><canvas id="renderCanvas"></canvas><script>var canvas=document.getElementById("renderCanvas");var startRenderLoop=function(engine,canvas){engine.runRenderLoop(function(){if(sceneToRender&&sceneToRender.activeCamera){sceneToRender.render();}});}
var engine=null;var scene=null;var sceneToRender=null;var createDefaultEngine=function(){return new BABYLON.Engine(canvas,true,{preserveDrawingBuffer:true,stencil:true,disableWebGL2Support:false});};var createScene=async function(){var scene=new BABYLON.Scene(engine);scene.clearColor=new BABYLON.Color3(0,0,0);const camera=new BABYLON.ArcRotateCamera("camera",-Math.PI/2,Math.PI/2.5,30,new BABYLON.Vector3(0,0,0));camera.attachControl(canvas,true);camera.lowerBetaLimit=0.1;camera.upperBetaLimit=2;camera.lowerRadiusLimit=15;camera.upperRadiusLimit=55;camera.upperBetaLimit=Math.PI/2.2;const light=new BABYLON.HemisphericLight("light",new BABYLON.Vector3(-1,1,-1));const light1=new BABYLON.HemisphericLight("light1",new BABYLON.Vector3(1,1,1));light.intensity=0.6;light1.intensity=0.6;const spriteManagerTrees=new BABYLON.SpriteManager("treesManager","textures/bush1.png",100,{width:1200,height:1700},scene);const spriteManagerTrees1=new BABYLON.SpriteManager("treesManager1","textures/bush.png",100,{width:1750,height:1300},scene);var sotok=50;for(let i=1;i<100;i++){const tree=new BABYLON.Sprite("tree",spriteManagerTrees);const tree1=new BABYLON.Sprite("tree1",spriteManagerTrees1);var a=Math.random()*(-2*sotok)+sotok/1;var b=Math.random()*(-2*sotok)+sotok/1;var c=25;var d=25;if(((a*b)!==0)&&(a*a+b*b)>c*d){tree.position.x=a/2;tree.position.z=b/2;tree.width=2;tree.height=2;tree1.position.x=b/2;tree1.position.z=a/2;tree1.width=2;tree1.height=2;}
tree.position.y=-0.9*Math.random();tree1.position.y=-0.9*Math.random();}
const skybox=BABYLON.MeshBuilder.CreateBox("skyBox",{size:sotok*4},scene);const skyboxMaterial=new BABYLON.StandardMaterial("skyBox",scene);skyboxMaterial.backFaceCulling=false;skyboxMaterial.reflectionTexture=new BABYLON.CubeTexture("textures/skybox/TropicalSunnyDay",scene);skyboxMaterial.reflectionTexture.coordinatesMode=BABYLON.Texture.SKYBOX_MODE;skyboxMaterial.diffuseColor=new BABYLON.Color3(0,0,0);skyboxMaterial.specularColor=new BABYLON.Color3(0,0,0);skybox.material=skyboxMaterial;var roof;var wall;var wallBlocks;var wallBlocks1;var tubes;var roofframe;var rooffunder;var windowframe;var walltop;var asdas;var ceiling;var bottomhouse;var floor;var ground;var roofMaterial=new BABYLON.StandardMaterial("roofMat",scene);var wallMaterial=new BABYLON.StandardMaterial("wallMat",scene);var tubesMaterial=new BABYLON.StandardMaterial("tubesMat",scene);var walltopMaterial=new BABYLON.StandardMaterial("walltopMat",scene);var ceilingMaterial=new BABYLON.StandardMaterial("ceilingMat",scene);BABYLON.SceneLoader.ImportMesh("","","House_02.glb",scene,function(newMeshes){roof=scene.getMeshByID("RoofMain");wall=scene.getMeshByID("Wall");wallBlocks=scene.getMeshByID("WallBlocks");wallBlocks1=scene.getMeshByID("WallBlocks1");tubes=scene.getMeshByID("Tubes");roofframe=scene.getMeshByID("RoofFrame");roofunder=scene.getMeshByID("RoofUnder");walltop=scene.getMeshByID("Walltop");asdas=scene.getMeshByID("asdas");ceiling=scene.getMeshByID("Ceiling");bottomhouse=scene.getMeshByID("BottomHouse");floor=scene.getMeshByID("Floor");ground=scene.getMeshByID("Ground");windowframe=scene.getMeshByID("WindowFrame");roof.material=roofMaterial;wall.material=wallMaterial;wallBlocks.material=wallMaterial;wallBlocks1.material=wallMaterial;tubes.material=tubesMaterial;roofframe.material=tubesMaterial;roofunder.material=tubesMaterial;walltop.material=walltopMaterial;asdas.material=walltopMaterial;ceiling.material=ceilingMaterial;bottomhouse.material=walltopMaterial;floor.material=ceilingMaterial;ground.material=ceilingMaterial;windowframe.material=tubesMaterial;});roofChangeMat("textures/111.jpg","textures/1111.jpg",0.4);wallChangeMat("textures/5.jpg","textures/55.jpg",1);walltopMaterial.diffuseTexture=new BABYLON.Texture("textures/stone.png",scene);walltopMaterial.bumpTexture=new BABYLON.Texture("textures/map.jpg",scene);walltopMaterial.emissiveColor=new BABYLON.Color3(0,1,1);ceilingMaterial.diffuseTexture=new BABYLON.Texture("textures/7777777.jpg",scene);ceilingMaterial.bumpTexture=new BABYLON.Texture("textures/88888888.jpg",scene);tubesMaterial.diffuseColor=new BABYLON.Color3(0,1,1);tubesMaterial.emissiveColor=new BABYLON.Color3(0,1,1);var ground_R=BABYLON.Mesh.CreateGround("ground_R",sotok*2,sotok*2,200,scene,false);ground_R.position=new BABYLON.Vector3(0,-1.5,0);var furMaterial_R=new BABYLON.FurMaterial("furS",scene);furMaterial_R.highLevelFur=false;furMaterial_R.furLength=0.5;furMaterial_R.furAngle=Math.PI/6;furMaterial_R.furColor=new BABYLON.Color3(0.26,0.2,0.02,0.32);ground_R.material=furMaterial_R;var ground_S=BABYLON.Mesh.CreateGround("ground_S",1.5*sotok,1.5*sotok,1500,scene,false);ground_S.position=new BABYLON.Vector3(0,-0.7,0);var furMaterial_S=new BABYLON.FurMaterial("fur_S",scene);furMaterial_S.highLevelFur=false;furMaterial_S.furLength=0.6;furMaterial_S.furAngle=Math.PI/6;furMaterial_S.furColor=new BABYLON.Color3(0.24,0.75,0.11);ground_S.material=furMaterial_S;scene.registerBeforeRender(function(){});const post=BABYLON.MeshBuilder.CreateCylinder("cylinder",{width:1,height:4,depth:1,tessellation:4});post.position=new BABYLON.Vector3(0,1.0,-35);post.rotation=new BABYLON.Vector3(0,Math.PI/4,0);post.material=wallMaterial;let posts=[];for(let i=0;i<15;i++){posts[i]=post.clone(`posts${i}`);posts[i].position.x=5*i-35;posts[i+15]=post.clone(`posts${i}`);posts[i+15].position.x=5*i-35;posts[i+15].position.z=35;};let postsFront=[];for(let i=0;i<15;i++){postsFront[i]=posts[15].clone(`posts${i}`);postsFront[i].position.z=5*i-35;postsFront[i+15]=posts[15].clone(`posts${i}`);postsFront[i+15].position.z=5*i-35;postsFront[i+15].position.x=35;};const conus=BABYLON.MeshBuilder.CreateCylinder("cylinder",{height:0.5,diameterTop:0,diameterBottom:1.5,tessellation:4,});conus.position=new BABYLON.Vector3(0,3.25,-35);conus.rotation=new BABYLON.Vector3(0,Math.PI/4,0);conus.material=tubesMaterial;let conuses=[];for(let i=0;i<15;i++){conuses[i]=conus.clone(`conuses${i}`);conuses[i].position.x=5*i-35;conuses[i+15]=conus.clone(`conuses${i}`);conuses[i+15].position.x=5*i-35;conuses[i+15].position.z=35;};let conusesFront=[];for(let i=0;i<15;i++){conusesFront[i]=conuses[15].clone(`conuses${i}`);conusesFront[i].position.z=5*i-35;conusesFront[i+15]=conuses[15].clone(`conuses${i}`);conusesFront[i+15].position.z=5*i-35;conusesFront[i+15].position.x=35;};const outline=[new BABYLON.Vector3(5,0,-35),new BABYLON.Vector3(35,0,-35),new BABYLON.Vector3(35,0,35),new BABYLON.Vector3(-35,0,35),new BABYLON.Vector3(-35,0,-35),new BABYLON.Vector3(-10,0,-35),new BABYLON.Vector3(-10,0,-34.8),new BABYLON.Vector3(-34.8,0,-34.8),new BABYLON.Vector3(-34.8,0,34.8),new BABYLON.Vector3(34.8,0,34.8),new BABYLON.Vector3(34.8,0,-34.8),new BABYLON.Vector3(5,0,-34.8)]
const fence=BABYLON.MeshBuilder.ExtrudePolygon("car",{shape:outline,depth:4});fence.position=new BABYLON.Vector3(0,2.5,0);fence.material=wallMaterial;let advancedTexture=BABYLON.GUI.AdvancedDynamicTexture.CreateFullscreenUI("GUI",true,scene);let loadedGUI=await advancedTexture.parseFromURLAsync("assets/guiTexture.json");let image01=advancedTexture.getControlByName("Image01");let image02=advancedTexture.getControlByName("Image02");let image03=advancedTexture.getControlByName("Image03");let image04=advancedTexture.getControlByName("Image04");let image05=advancedTexture.getControlByName("Image05");let image06=advancedTexture.getControlByName("Image06");let image11=advancedTexture.getControlByName("Image11");let image12=advancedTexture.getControlByName("Image12");let image13=advancedTexture.getControlByName("Image13");let image14=advancedTexture.getControlByName("Image14");let image15=advancedTexture.getControlByName("Image15");let image16=advancedTexture.getControlByName("Image16");let matPicker1=advancedTexture.getControlByName("ColorPicker1");let matPicker2=advancedTexture.getControlByName("ColorPicker2");matPicker1.onValueChangedObservable.add(function(value){tubesMaterial.diffuseColor=value;tubesMaterial.emissiveColor=value;});matPicker2.onValueChangedObservable.add(function(value){walltopMaterial.emissiveColor=value;});image02.onPointerUpObservable.add(function(){roofChangeMat("textures/555.jpg","textures/5555.jpg",0.3);});image03.onPointerUpObservable.add(function(){roofChangeMat("textures/444.jpg","textures/4444.jpg",0.5);});image04.onPointerUpObservable.add(function(){roofChangeMat("textures/333.jpg","textures/3333.jpg",0.3);});image05.onPointerUpObservable.add(function(){roofChangeMat("textures/222.jpg","textures/2222.jpg",0.3);});image06.onPointerUpObservable.add(function(){roofChangeMat("textures/111.jpg","textures/1111.jpg",0.4);});image12.onPointerUpObservable.add(function(){wallChangeMat("textures/5.jpg","textures/55.jpg",1);});image13.onPointerUpObservable.add(function(){wallChangeMat("textures/4.jpg","textures/44.jpg",1);});image14.onPointerUpObservable.add(function(){wallChangeMat("textures/3.jpg","textures/33.jpg",1);});image15.onPointerUpObservable.add(function(){wallChangeMat("textures/2.jpg","textures/22.jpg",1);});image16.onPointerUpObservable.add(function(){wallChangeMat("textures/1.jpg","textures/11.jpg",1);});function roofChangeMat(pic1,pic2,scaleUV){roofMaterial.diffuseTexture=new BABYLON.Texture(pic1,scene);roofMaterial.emissiveTexture=new BABYLON.Texture(pic1,scene);roofMaterial.bumpTexture=new BABYLON.Texture(pic2,scene);roofMaterial.diffuseTexture.uScale=scaleUV;roofMaterial.diffuseTexture.vScale=scaleUV;roofMaterial.emissiveTexture.uScale=scaleUV;roofMaterial.emissiveTexture.vScale=scaleUV;roofMaterial.bumpTexture.uScale=scaleUV;roofMaterial.bumpTexture.vScale=scaleUV;}
function wallChangeMat(pic3,pic4,scaleWallUV){wallMaterial.diffuseTexture=new BABYLON.Texture(pic3,scene);wallMaterial.emissiveTexture=new BABYLON.Texture(pic3,scene);wallMaterial.bumpTexture=new BABYLON.Texture(pic4,scene);wallMaterial.diffuseTexture.uScale=scaleWallUV;wallMaterial.diffuseTexture.vScale=scaleWallUV;wallMaterial.emissiveTexture.uScale=scaleWallUV;wallMaterial.emissiveTexture.vScale=scaleWallUV;wallMaterial.bumpTexture.uScale=scaleWallUV;wallMaterial.bumpTexture.vScale=scaleWallUV;}
return scene;};window.initFunction=async function(){var asyncEngineCreation=async function(){try{return createDefaultEngine();}catch(e){console.log("Что то пошло не так, попробуйте позже!");return createDefaultEngine();}}
window.engine=await asyncEngineCreation();if(!engine)throw'Проблема с движком!';startRenderLoop(engine,canvas);window.scene=createScene();};initFunction().then(()=>{scene.then(returnedScene=>{sceneToRender=returnedScene;});});window.addEventListener("resize",function(){engine.resize();});</script></body></html>